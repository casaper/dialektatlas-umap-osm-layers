{
  "$schema": "http://json-schema.org/draft-06/schema#",
  "title": "uMap Layer - GeoJSON FeatureCollection",
  "type": "object",
  "properties": {
    "type": {
      "type": "string",
      "enum": ["FeatureCollection"]
    },
    "features": {
      "type": "array",
      "items": {
        "title": "GeoJSON Feature",
        "type": "object",
        "required": ["type", "properties", "geometry"],
        "properties": {
          "type": {
            "type": "string",
            "enum": ["Feature"]
          },
          "id": {
            "oneOf": [
              {
                "type": "number"
              },
              {
                "type": "string"
              }
            ]
          },
          "properties": {
            "type": "object",
            "nullable": true,
            "properties": {
              "fid": {
                "type": "integer"
              },
              "name": {
                "type": "string"
              },
              "_umap_options": {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                  "fillColor": {
                    "title": "fill color",
                    "type": "string",
                    "description": "Optional. Same as color if not set."
                  },
                  "stroke": {
                    "title": "stroke",
                    "type": "boolean",
                    "description": "Whether to display or not polygons paths."
                  },
                  "fill": {
                    "type": "boolean",
                    "description": "Whether to fill polygons with color."
                  },
                  "fillOpacity": {
                    "title": "fill opacity",
                    "minimum": 0.1,
                    "maximum": 1,
                    "multipleOf": 0.1,
                    "default": 1
                  },
                  "outlink": {
                    "title": "Link to…",
                    "type": "string",
                    "description": "Define link to open in a new window on polygon click."
                  },
                  "outlinkTarget": {
                    "title": "Open link in…",
                    "enum": ["blank", "self", "parent"]
                  },
                  "popupShape": {
                    "title": "Popup shape",
                    "enum": ["Default", "Large", "Panel"],
                    "description": "Define the shape of the popup.  \\nDefault: Popup  \\nLarge: Popup (large)  \\nPanel: Side panel"
                  },
                  "popupTemplate": {
                    "title": "Popup content style",
                    "description": "Define the style of the popup content.",
                    "enum": ["Default", "Table", "GeoRSSImage", "GeoRSSLink", "OSM", "Wikipedia", "Route"],
                    "default": "Default"
                  },
                  "showLabel": {
                    "type": "boolean",
                    "nullable": true,
                    "default": false,
                    "title": "Show label",
                    "description": "Whether to display a label on the feature. Choices: 'always' (true), 'never' (false), or 'on hover' (null). Default is 'never'."
                  },
                  "labelDirection": {
                    "title": "Label direction",
                    "enum": ["auto", "left", "right", "top", "bottom"],
                    "description": "The direction in which the label is displayed.",
                    "default": "auto"
                  },
                  "labelInteractive": {
                    "title": "Labels are clickable",
                    "type": "boolean",
                    "description": "Whether the label should be interactive."
                  },
                  "interactive": {
                    "type": "boolean",
                    "title": "Allow interactions",
                    "description": "If false, the polygon or line will act as a part of the underlying map.",
                    "default": true
                  },
                  "labelKey": {
                    "type": "string",
                    "description": "The name of the property to use as feature label (eg.: \"nom\"). You can also use properties inside brackets to use more than one or mix with static content (eg.: \"&lcub;name&rcub; in &lcub;place&rcub;\")",
                    "title": "Label key",
                    "default": "name"
                  },
                  "zoomTo": {
                    "type": "number",
                    "description": "Zoom level for automatic zooms",
                    "title": "Default zoom level"
                  },
                  "iconUrl": {
                    "type": "string",
                    "description": "Icon symbol",
                    "title": "Icon symbol",
                    "inheritable": true
                  },
                  "iconClass": {
                    "description": "Icon shape",
                    "title": "Icon shape",
                    "enum": ["Default", "Circle", "LargeCircle", "Drop", "Ball", "Raw"],
                    "default": "Default"
                  },
                  "iconSize": {
                    "type": "number",
                    "description": "Icon size. Will only affect raw and large circle icons.",
                    "title": "Icon size",
                    "minimum": 12,
                    "maximum": 64,
                    "multipleOf": 4,
                    "default": 24
                  },
                  "iconOpacity": {
                    "type": "number",
                    "description": "Icon opacity",
                    "title": "Icon opacity",
                    "minimum": 0.1,
                    "maximum": 1,
                    "multipleOf": 0.1,
                    "default": 1
                  },
                  "mask": {
                    "type": "boolean",
                    "description": "Display the polygon inverted",
                    "title": "Mask"
                  },
                  "color": {
                    "type": "string",
                    "description": "Color value",
                    "title": "Color",
                    "default": "DarkBlue"
                  },
                  "opacity": {
                    "type": "number",
                    "description": "Opacity value",
                    "title": "Opacity",
                    "minimum": 0.1,
                    "maximum": 1,
                    "multipleOf": 0.1,
                    "default": 0.5
                  },
                  "weight": {
                    "type": "number",
                    "description": "Weight value",
                    "title": "Weight",
                    "minimum": 1,
                    "maximum": 20,
                    "multipleOf": 1,
                    "default": 3
                  },
                  "smoothFactor": {
                    "type": "number",
                    "description": "How much to simplify the polyline on each zoom level (more = better performance and smoother look, less = more accurate)",
                    "title": "Smooth Factor",
                    "minimum": 0,
                    "maximum": 10,
                    "multipleOf": 0.5,
                    "default": 1.0
                  },
                  "dashArray": {
                    "type": "string",
                    "description": "A comma separated list of numbers that defines the stroke dash pattern. Ex.: \"5, 10, 15\".",
                    "title": "Dash Array"
                  },

                  "textPath": {
                    "type": "string",
                    "description": "Add text along path",
                    "title": "Text Path"
                  },
                  "textPathColor": {
                    "type": "string",
                    "description": "Text color",
                    "title": "Text Path Color"
                  },
                  "textPathRepeat": {
                    "type": "boolean",
                    "description": "Text repeat",
                    "title": "Text Path Repeat",
                    "default": true
                  },
                  "textPathRotate": {
                    "type": "number",
                    "description": "Text rotate",
                    "title": "Text Path Rotate",
                    "default": 0,
                    "minimum": 0,
                    "maximum": 360,
                    "multipleOf": 1
                  },
                  "textPathSize": {
                    "type": "number",
                    "description": "Text size",
                    "title": "Text Path Size",
                    "default": 20,
                    "minimum": 10,
                    "maximum": 30,
                    "multipleOf": 1
                  },
                  "textPathOffset": {
                    "type": "number",
                    "description": "Text offset",
                    "title": "Text Path Offset",
                    "default": 1,
                    "minimum": -20,
                    "maximum": 20,
                    "multipleOf": 1
                  },
                  "textPathPosition": {
                    "description": "Text position",
                    "title": "Text Path Position",
                    "default": "center",
                    "enum": ["start", "center", "end"]
                  },
                  "route": {
                    "type": "object",
                    "properties": {
                      "active": {
                        "type": "boolean",
                        "description": "Indicates whether the route is active",
                        "title": "Active"
                      },
                      "profile": {
                        "description": "Specifies the profile of the route",
                        "title": "Profile",
                        "enum": [
                          "foot-walking",
                          "foot-hiking",
                          "driving-car",
                          "cycling-regular",
                          "wheelchair"
                        ],
                        "default": "foot-walking"
                      },
                      "preference": {
                        "description": "Specifies the preference of the route",
                        "title": "Preference",
                        "enum": [
                          "foot-walking",
                          "foot-hiking",
                          "driving-car",
                          "cycling-regular",
                          "wheelchair"
                        ],
                        "default": "foot-walking"
                      },
                      "elevation": {
                        "type": "boolean",
                        "description": "Indicates whether elevation data is included",
                        "title": "Elevation",
                        "default": false
                      },
                      "coordinates": {
                        "type": "array",
                        "description": "Array of coordinates for the route",
                        "title": "Coordinates",
                        "minItems": 2,
                        "items": {
                          "type": "number"
                        }
                      }
                    },
                    "required": []
                  }
                },
                "required": [],
                "title": "PropertiesUmapOptions"
              }
            },
            "required": [],
            "title": "FeatureProperties"
          },
          "geometry": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "title": "GeoJSON Point",
                "type": "object",
                "required": ["type", "coordinates"],
                "properties": {
                  "type": {
                    "type": "string",
                    "enum": ["Point"]
                  },
                  "coordinates": {
                    "type": "array",
                    "minItems": 2,
                    "items": {
                      "type": "number"
                    }
                  },
                  "bbox": {
                    "type": "array",
                    "minItems": 4,
                    "items": {
                      "type": "number"
                    }
                  }
                }
              },
              {
                "title": "GeoJSON LineString",
                "type": "object",
                "required": ["type", "coordinates"],
                "properties": {
                  "type": {
                    "type": "string",
                    "enum": ["LineString"]
                  },
                  "coordinates": {
                    "type": "array",
                    "minItems": 2,
                    "items": {
                      "type": "array",
                      "minItems": 2,
                      "items": {
                        "type": "number"
                      }
                    }
                  },
                  "bbox": {
                    "type": "array",
                    "minItems": 4,
                    "items": {
                      "type": "number"
                    }
                  }
                }
              },
              {
                "title": "GeoJSON Polygon",
                "type": "object",
                "required": ["type", "coordinates"],
                "properties": {
                  "type": {
                    "type": "string",
                    "enum": ["Polygon"]
                  },
                  "coordinates": {
                    "type": "array",
                    "items": {
                      "type": "array",
                      "minItems": 4,
                      "items": {
                        "type": "array",
                        "minItems": 2,
                        "items": {
                          "type": "number"
                        }
                      }
                    }
                  },
                  "bbox": {
                    "type": "array",
                    "minItems": 4,
                    "items": {
                      "type": "number"
                    }
                  }
                }
              },
              {
                "title": "GeoJSON MultiPoint",
                "type": "object",
                "required": ["type", "coordinates"],
                "properties": {
                  "type": {
                    "type": "string",
                    "enum": ["MultiPoint"]
                  },
                  "coordinates": {
                    "type": "array",
                    "items": {
                      "type": "array",
                      "minItems": 2,
                      "items": {
                        "type": "number"
                      }
                    }
                  },
                  "bbox": {
                    "type": "array",
                    "minItems": 4,
                    "items": {
                      "type": "number"
                    }
                  }
                }
              },
              {
                "title": "GeoJSON MultiLineString",
                "type": "object",
                "required": ["type", "coordinates"],
                "properties": {
                  "type": {
                    "type": "string",
                    "enum": ["MultiLineString"]
                  },
                  "coordinates": {
                    "type": "array",
                    "items": {
                      "type": "array",
                      "minItems": 2,
                      "items": {
                        "type": "array",
                        "minItems": 2,
                        "items": {
                          "type": "number"
                        }
                      }
                    }
                  },
                  "bbox": {
                    "type": "array",
                    "minItems": 4,
                    "items": {
                      "type": "number"
                    }
                  }
                }
              },
              {
                "title": "GeoJSON MultiPolygon",
                "type": "object",
                "required": ["type", "coordinates"],
                "properties": {
                  "type": {
                    "type": "string",
                    "enum": ["MultiPolygon"]
                  },
                  "coordinates": {
                    "type": "array",
                    "items": {
                      "type": "array",
                      "items": {
                        "type": "array",
                        "minItems": 4,
                        "items": {
                          "type": "array",
                          "minItems": 2,
                          "items": {
                            "type": "number"
                          }
                        }
                      }
                    }
                  },
                  "bbox": {
                    "type": "array",
                    "minItems": 4,
                    "items": {
                      "type": "number"
                    }
                  }
                }
              },
              {
                "title": "GeoJSON GeometryCollection",
                "type": "object",
                "required": ["type", "geometries"],
                "properties": {
                  "type": {
                    "type": "string",
                    "enum": ["GeometryCollection"]
                  },
                  "geometries": {
                    "type": "array",
                    "items": {
                      "oneOf": [
                        {
                          "title": "GeoJSON Point",
                          "type": "object",
                          "required": ["type", "coordinates"],
                          "properties": {
                            "type": {
                              "type": "string",
                              "enum": ["Point"]
                            },
                            "coordinates": {
                              "type": "array",
                              "minItems": 2,
                              "items": {
                                "type": "number"
                              }
                            },
                            "bbox": {
                              "type": "array",
                              "minItems": 4,
                              "items": {
                                "type": "number"
                              }
                            }
                          }
                        },
                        {
                          "title": "GeoJSON LineString",
                          "type": "object",
                          "required": ["type", "coordinates"],
                          "properties": {
                            "type": {
                              "type": "string",
                              "enum": ["LineString"]
                            },
                            "coordinates": {
                              "type": "array",
                              "minItems": 2,
                              "items": {
                                "type": "array",
                                "minItems": 2,
                                "items": {
                                  "type": "number"
                                }
                              }
                            },
                            "bbox": {
                              "type": "array",
                              "minItems": 4,
                              "items": {
                                "type": "number"
                              }
                            }
                          }
                        },
                        {
                          "title": "GeoJSON Polygon",
                          "type": "object",
                          "required": ["type", "coordinates"],
                          "properties": {
                            "type": {
                              "type": "string",
                              "enum": ["Polygon"]
                            },
                            "coordinates": {
                              "type": "array",
                              "items": {
                                "type": "array",
                                "minItems": 4,
                                "items": {
                                  "type": "array",
                                  "minItems": 2,
                                  "items": {
                                    "type": "number"
                                  }
                                }
                              }
                            },
                            "bbox": {
                              "type": "array",
                              "minItems": 4,
                              "items": {
                                "type": "number"
                              }
                            }
                          }
                        },
                        {
                          "title": "GeoJSON MultiPoint",
                          "type": "object",
                          "required": ["type", "coordinates"],
                          "properties": {
                            "type": {
                              "type": "string",
                              "enum": ["MultiPoint"]
                            },
                            "coordinates": {
                              "type": "array",
                              "items": {
                                "type": "array",
                                "minItems": 2,
                                "items": {
                                  "type": "number"
                                }
                              }
                            },
                            "bbox": {
                              "type": "array",
                              "minItems": 4,
                              "items": {
                                "type": "number"
                              }
                            }
                          }
                        },
                        {
                          "title": "GeoJSON MultiLineString",
                          "type": "object",
                          "required": ["type", "coordinates"],
                          "properties": {
                            "type": {
                              "type": "string",
                              "enum": ["MultiLineString"]
                            },
                            "coordinates": {
                              "type": "array",
                              "items": {
                                "type": "array",
                                "minItems": 2,
                                "items": {
                                  "type": "array",
                                  "minItems": 2,
                                  "items": {
                                    "type": "number"
                                  }
                                }
                              }
                            },
                            "bbox": {
                              "type": "array",
                              "minItems": 4,
                              "items": {
                                "type": "number"
                              }
                            }
                          }
                        },
                        {
                          "title": "GeoJSON MultiPolygon",
                          "type": "object",
                          "required": ["type", "coordinates"],
                          "properties": {
                            "type": {
                              "type": "string",
                              "enum": ["MultiPolygon"]
                            },
                            "coordinates": {
                              "type": "array",
                              "items": {
                                "type": "array",
                                "items": {
                                  "type": "array",
                                  "minItems": 4,
                                  "items": {
                                    "type": "array",
                                    "minItems": 2,
                                    "items": {
                                      "type": "number"
                                    }
                                  }
                                }
                              }
                            },
                            "bbox": {
                              "type": "array",
                              "minItems": 4,
                              "items": {
                                "type": "number"
                              }
                            }
                          }
                        }
                      ]
                    }
                  },
                  "bbox": {
                    "type": "array",
                    "minItems": 4,
                    "items": {
                      "type": "number"
                    }
                  }
                }
              }
            ]
          },
          "bbox": {
            "type": "array",
            "minItems": 4,
            "items": {
              "type": "number"
            }
          }
        }
      }
    },

    "_umap_options": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "name": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "rank": {
          "type": "integer",
          "title": "datalayer-rank",
          "minimum": 1
        },
        "fields": {
          "type": "array",
          "uniqueItems": true,
          "items": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
              "key": {
                "type": "string",
                "title": "Key"
              },
              "type": {
                "enum": ["String", "Text", "Number", "Datetime", "Date", "Boolean", "Enum"],
                "title": "FieldType"
              }
            },
            "required": ["key", "type"],
            "title": "Custom User fields"
          }
        },
        "editMode": {
          "enum": ["advanced", "simple", "disabled"],
          "default": "advanced",
          "title": "EditMode"
        },
        "browsable": {
          "title": "Data is browsable",
          "description": "Set it to false to hide this layer from the slideshow, the data browser, the popup navigation…",
          "type": "boolean",
          "default": true,
          "nullable": true
        },
        "inCaption": {
          "type": "boolean"
        },
        "displayOnLoad": {
          "title": "Display on load",
          "type": "boolean",
          "default": true
        },
        "labelKey": {
          "type": "string",
          "description": "The name of the property to use as layer label (eg.: \"nom\"). You can also use properties inside brackets to use more than one or mix with static content (eg.: \"&lcub;name&rcub; in &lcub;place&rcub;\")",
          "title": "Label key",
          "default": "name"
        },
        "showLabel": {
          "type": "boolean",
          "nullable": true,
          "default": false,
          "title": "Show label",
          "description": "Whether to display a label on the layer. Choices: 'always' (true), 'never' (false), or 'on hover' (null). Default is 'never'."
        },
        "remoteData": {
          "type": "object",
          "properties": {
            "from": {
              "type": "number",
              "title": "From zoom"
            },
            "to": {
              "type": "number",
              "title": "To zoom"
            },
            "url": {
              "type": "string",
              "format": "uri"
            },
            "proxy": {
              "type": "boolean",
              "description": "To use if remote server doesn't allow cross domain (slower)"
            },
            "ttl": {
              "enum": [null, 300, 3600, 86400],
              "default": 300,
              "title": "Cache proxied request"
            },
            "format": {
              "nullable": true,
              "enum": [null, "geojson", "osm", "csv", "gpx", "kml", "georss"],
              "title": "Data Format"
            },
            "dynamic": {
              "type": "boolean",
              "description": "Fetch data each time map view changes."
            },
            "licence": {
              "type": "string",
              "description": "Please be sure the licence is compliant with your use."
            }
          },
          "required": []
        },
        "limitBounds": {
          "type": "object",
          "title": "LimitBounds",
          "properties": {
            "south": {
              "type": "string",
              "pattern": "^[0-9]{1,}\\.[0-9]{1,6}$"
            },
            "west": {
              "type": "string",
              "pattern": "^[0-9]{1,}\\.[0-9]{1,6}$"
            },
            "north": {
              "type": "string",
              "pattern": "^[0-9]{1,}\\.[0-9]{1,6}$"
            },
            "east": {
              "type": "string",
              "pattern": "^[0-9]{1,}\\.[0-9]{1,6}$"
            }
          },
          "required": []
        }
      },
      "required": [
        "browsable",
        "displayOnLoad",
        "editMode",
        "fields",
        "inCaption",
        "name",
        "rank",
        "remoteData"
      ],
      "title": "LayerUmapOptions"
    },
    "bbox": {
      "type": "array",
      "minItems": 4,
      "items": {
        "type": "number"
      }
    }
  },
  "required": ["type", "features"]
}
